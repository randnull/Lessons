from AnswerEngine.src.TelegramBot.botStudent import bot_student
from AnswerEngine.src.TelegramBot.botTutor import bot_tutor
from AnswerEngine.src.models.dto_table.dto import NewOrderDto, ResponseDto, SuggestDto

from AnswerEngine.src.config.settings import settings


async def proceed_order(order_create: NewOrderDto) -> None:
    message = (
        f"<b>–í—ã —Å–æ–∑–¥–∞–ª–∏ –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑: {order_create.order_name}!</b>\n\n"
        "üì© <i>–ú—ã —É–≤–µ–¥–æ–º–∏–º –≤–∞—Å, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –Ω–∞–π–¥–µ–º –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è.</i>"
    )

    await bot_student.send_message(chat_id=str(order_create.student_id), text=message, parse_mode="html")


async def proceed_response(response: ResponseDto) -> None:
    messageStudent = (
        f"<b>–ù–∞ –≤–∞—à –∑–∞–∫–∞–∑: {response.order_name} –ø–æ—è–≤–∏–ª—Å—è –Ω–æ–≤—ã–π –æ—Ç–∫–ª–∏–∫!</b>\n\n"
    )

    messageTutor = (
        f"<b>–í—ã —É—Å–ø–µ—à–Ω–æ –æ—Ç–∫–ª–∏–∫–Ω—É–ª–∏—Å—å –Ω–∞ –∑–∞–∫–∞–∑: {response.order_name}!</b>\n\n"
    )

    await bot_student.send_message(chat_id=response.student_id, text=messageStudent, parse_mode="html")
    await bot_tutor.send_message(chat_id=response.tutor_id, text=messageTutor, parse_mode="html")

async def proceed_suggest(suggest_order: SuggestDto) -> None:

    message = (
        f"<b>–í–∞–º –ø—Ä–µ–¥–ª–æ–∂–∏–ª–∏ –∑–∞–∫–∞–∑: {suggest_order.order_name}</b>\n\n"
        f"<b>–û–ø–∏—Å–∞–Ω–∏–µ: {suggest_order.description}</b>\n\n"
        f"<b>–¶–µ–Ω–∞: {suggest_order.min_price} - {suggest_order.max_price} </b>\n\n"
    )

    await bot_tutor.send_message(chat_id=suggest_order.tutor_telegram_id, text=message, parse_mode="html")


